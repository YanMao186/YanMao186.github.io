<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java,MVC,">










<meta name="description" content="Struts1. Struts2框架概述 Struts2是一个基于MVC模式的轻量级web框架，本质上相当于servlet，在MVC设计模式中，Struts2作为控制器来控制与模型视图的数据交互。  前端控制器  在传统方式开发中，有一次请求就会对应一个Servlet，这样会导致出现很多Servlet。而Struts2将所有的请求都先经过一个前端控制器，在前端控制器中实现框架的部分功能，剩下具体操">
<meta name="keywords" content="java,MVC">
<meta property="og:type" content="article">
<meta property="og:title" content="struts">
<meta property="og:url" content="http://yoursite.com/2019/07/09/struts/index.html">
<meta property="og:site_name" content="MrYan">
<meta property="og:description" content="Struts1. Struts2框架概述 Struts2是一个基于MVC模式的轻量级web框架，本质上相当于servlet，在MVC设计模式中，Struts2作为控制器来控制与模型视图的数据交互。  前端控制器  在传统方式开发中，有一次请求就会对应一个Servlet，这样会导致出现很多Servlet。而Struts2将所有的请求都先经过一个前端控制器，在前端控制器中实现框架的部分功能，剩下具体操">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558174458049.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558229004769.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558229089988.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558229740983.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558229764278.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558233075767.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558318236838.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558409702790.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558423520232.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558451680695.png">
<meta property="og:image" content="http://yoursite.com/2019/07/09/struts/1558496234242.png">
<meta property="og:updated_time" content="2019-07-09T16:13:52.484Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="struts">
<meta name="twitter:description" content="Struts1. Struts2框架概述 Struts2是一个基于MVC模式的轻量级web框架，本质上相当于servlet，在MVC设计模式中，Struts2作为控制器来控制与模型视图的数据交互。  前端控制器  在传统方式开发中，有一次请求就会对应一个Servlet，这样会导致出现很多Servlet。而Struts2将所有的请求都先经过一个前端控制器，在前端控制器中实现框架的部分功能，剩下具体操">
<meta name="twitter:image" content="http://yoursite.com/2019/07/09/struts/1558174458049.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/07/09/struts/">





  <title>struts | MrYan</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MrYan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/09/struts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yan Mao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MrYan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">struts</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-09T23:57:24+08:00">
                2019-07-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Struts"><a href="#Struts" class="headerlink" title="Struts"></a>Struts</h2><h3 id="1-Struts2框架概述"><a href="#1-Struts2框架概述" class="headerlink" title="1. Struts2框架概述"></a>1. Struts2框架概述</h3><ul>
<li><p>Struts2是一个基于MVC模式的轻量级web框架，本质上相当于servlet，在MVC设计模式中，Struts2作为控制器来控制与模型视图的数据交互。</p>
</li>
<li><p>前端控制器</p>
<ul>
<li>在传统方式开发中，有一次请求就会对应一个Servlet，这样会导致出现很多Servlet。而Struts2将所有的请求都先经过一个前端控制器，在前端控制器中实现框架的部分功能，剩下具体操作要提交到具体的Action中，那么所有的请求都会经过前端控制器（本质上就是一个过滤器）</li>
</ul>
<p><img src="/2019/07/09/struts/1558174458049.png" alt="1558174458049"></p>
</li>
</ul>
<h3 id="2-Struts2入门"><a href="#2-Struts2入门" class="headerlink" title="2. Struts2入门"></a>2. Struts2入门</h3><ul>
<li><p>项目目录结构</p>
<p><img src="/2019/07/09/struts/1558229004769.png" alt="1558229004769"></p>
</li>
<li><p>项目需要的jar包</p>
<p><img src="/2019/07/09/struts/1558229089988.png" alt="1558229089988"></p>
</li>
<li><p>目录内容详解</p>
<ol>
<li><p>在index.jsp中编写Action的访问路径</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Mr Yan</span><br><span class="line">  Date: <span class="number">2019</span>/<span class="number">5</span>/<span class="number">18</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">30</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Struts2入门&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line"> &lt;a href="$&#123;pageContext.request.contextPath&#125;/strutsDemo1.action"&gt;success入门&lt;/a&gt;</span><br><span class="line"> &lt;a href="$&#123;pageContext.request.contextPath&#125;/strutsDemo2.action"&gt;error入门&lt;/a&gt;</span><br><span class="line"> &lt;a href="$&#123;pageContext.request.contextPath&#125;/strutsDemo3.action"&gt;success入门&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在包下新建StrutsDemo1的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrutsDemo1</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提供一个默认的执行方法：execute</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"StrutsDemo1中的execute执行了"</span>);</span><br><span class="line">        <span class="comment">//返回页面的名称</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"StrutsDemo1中的execute执行了"</span>);</span><br><span class="line">        <span class="comment">//返回页面的名称</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在src根目录下创建名为struts.xml文件，用于配置struts2信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></span><br><span class="line"><span class="meta">        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span></span><br><span class="line"><span class="meta">        "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"demo"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"strutsDemo1"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.StrutsDemo1"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"strutsDemo2"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.StrutsDemo1"</span> <span class="attr">method</span>=<span class="string">"execute1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"error"</span>&gt;</span>page/error.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"strutsDemo3"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.ActionDemo2"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在web.xml中配置struts2的前端控制器(核心控制器)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在web目录下创建页面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%--</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Created</span> <span class="attr">by</span> <span class="attr">IntelliJ</span> <span class="attr">IDEA.</span></span></span><br><span class="line"><span class="tag">  <span class="attr">User:</span> <span class="attr">Mr</span> <span class="attr">Yan</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Date:</span> <span class="attr">2019</span>/<span class="attr">5</span>/<span class="attr">18</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Time:</span> <span class="attr">17:30</span></span></span><br><span class="line"><span class="tag">  <span class="attr">To</span> <span class="attr">change</span> <span class="attr">this</span> <span class="attr">template</span> <span class="attr">use</span> <span class="attr">File</span> | <span class="attr">Settings</span> | <span class="attr">File</span> <span class="attr">Templates.</span></span></span><br><span class="line"><span class="tag"><span class="attr">--</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  入门成功</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置Tomcat启动服务</p>
<p><img src="/2019/07/09/struts/1558229740983.png" alt="1558229740983"></p>
<p><img src="/2019/07/09/struts/1558229764278.png" alt="1558229764278"></p>
</li>
</ol>
</li>
</ul>
<h3 id="3-Struts2工作流程"><a href="#3-Struts2工作流程" class="headerlink" title="3. Struts2工作流程"></a>3. Struts2工作流程</h3><pre><code>1. 客户端初始化一个指向**Servlet**容器的请求。
2. 这个请求经过一系列的过滤器(**Filter**)(这些过滤器中有一个叫做**ActionContextCleanUp**的可选过滤器)。
3. 接着**FilterDispatcher**被调用，**FilterDispatcher**询问**ActionMapper**来决定这个请求是否需要调用某个**Action**。
4. 如果**ActionMapper**决定需要调用某个**Action**,**FilterDispatcher**把请求的处理交给**ActionProxy**。
5. **ActionProxy**通过**Configuration Manager**询问框架的配置文件。
6. **ActionProxy**创建一个**ActionInvocation**的实例。
7. **ActionInvocation**实例使用命名模式来调用，在调用**Action**的过程前后，涉及到相关拦截器的调用。
8. 一旦**Action**执行完毕，**ActionInvocation**负责根据**struts**。**xml**中的配置找到对应的返回结果，返回结果通常是一个需要被表示的**JSP**或者**FreeMarker**的模板，在表示的过程中可以使用**Struts2**框架中继承的标签，在这个过程中需要涉及到**ActionMapper**。
9. 响应的返回是通过我们在**web.xml**中配置的过滤器。
10. 如果**ActionContextCleanUp**是当前使用的，则**FilterDispatecher**将不会清理**sreadlocal ActionContext**,如果**ActionContextCleanUp**不使用，则将会去清理**sreadlocals**。</code></pre><p><img src="/2019/07/09/struts/1558233075767.png" alt="1558233075767"></p>
<h3 id="4-Struts-xml相关配置讲解"><a href="#4-Struts-xml相关配置讲解" class="headerlink" title="4.Struts.xml相关配置讲解"></a>4.Struts.xml相关配置讲解</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   package标签</span></span><br><span class="line"><span class="comment">           name属性：必须，指定该包的名称，此名称是该包被其他包应用的key,只要在项目中不重名即可</span></span><br><span class="line"><span class="comment">           extends属性：必须，指定该包继承自其他包，通常都设置为struts-default</span></span><br><span class="line"><span class="comment">           namespace属性：必须，与action标签的name属性共同决定了访问路径，有三种配置方式</span></span><br><span class="line"><span class="comment">               默认名称空间：namespace=""</span></span><br><span class="line"><span class="comment">               根名称空间：namespace="/"</span></span><br><span class="line"><span class="comment">               带名称的名称空间：namespace="/demo1"</span></span><br><span class="line"><span class="comment">           abstract属性：可选，指定该包是否是一个抽象包，抽象包中不能包含Action定义</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"demo"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       action标签：</span></span><br><span class="line"><span class="comment">           name属性：与namespace共同决定了访问路径</span></span><br><span class="line"><span class="comment">           class属性：Action类的全路径</span></span><br><span class="line"><span class="comment">           method属性：执行Action中的那个方法的方法名，默认值execute</span></span><br><span class="line"><span class="comment">           converter属性：用于设置类型转换器</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"strutsDemo1.save"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.StrutsDemo1"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Struts2常量配置"><a href="#5-Struts2常量配置" class="headerlink" title="5.Struts2常量配置"></a>5.Struts2常量配置</h3><ul>
<li><p>在struts2中，提供了非常多的常量位于struts2-core-xxx.jar下org.apacha.struts2的default.properties内经常使用的有<code>struts.i18n.encoding=UTF-8</code>,<code>struts.action.exension=action</code>等</p>
</li>
<li><p>我们对他进行使用有三种方式。</p>
<ul>
<li><p>在Struts.xml中进行修改(通常修改此文件)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.action.extension"</span> <span class="attr">value</span>=<span class="string">"action,,"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在struts.properties中进行修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">struts.action.extension=action</span><br></pre></td></tr></table></figure>
</li>
<li><p>在web.xml中进行修改</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>struts.action.extension<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>do<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="6-struts分模块开发配置"><a href="#6-struts分模块开发配置" class="headerlink" title="6.struts分模块开发配置"></a>6.struts分模块开发配置</h3><ul>
<li><p>分模块开发的时候如果需要xml配置文件之间的相互引用使用include标签</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"com/ym/struts2/action/Struts-demo.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="7-Action的访问"><a href="#7-Action的访问" class="headerlink" title="7.Action的访问"></a>7.Action的访问</h3><ul>
<li><p>Action访问的三种方式</p>
<ul>
<li><p>Action类是POJO的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrutsDemo1</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提供一个默认的执行方法：execute</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"StrutsDemo1中的execute执行了"</span>);</span><br><span class="line">        <span class="comment">//返回页面的名称</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Action类实现一个Action的接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: Struts2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mr.Yan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-05-20 09:40</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActionDemo3</span> <span class="keyword">implements</span> <span class="title">Action</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回值类型</span></span><br><span class="line"><span class="comment">     * SUCCESS:成功</span></span><br><span class="line"><span class="comment">     * ERROR:失败</span></span><br><span class="line"><span class="comment">     * LOGIN:登录出错页面跳转</span></span><br><span class="line"><span class="comment">     * INPUT:表单校验的时候出错</span></span><br><span class="line"><span class="comment">     * NONE:不跳转</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ActionDemo3执行了"</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Action类继承ActionSupper类</p>
<ul>
<li>推荐使用此方式，ActionSupport中提供了数据校验，国际化等一系列操作的方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActionDemo2</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ol>
<li><p>通过method访问</p>
<p><img src="/2019/07/09/struts/1558318236838.png" alt="1558318236838"></p>
</li>
<li><p>通过通配符的方式进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--*号的取值是啥，&#123;1&#125;代表的就是啥--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"action_*"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.ActionDemo3"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>动态方法访问</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启动态方法访问--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.enable.DynamicMethodInvocation"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.action.ActionDemo3"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>编写访问路径</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="$&#123;pageContext.request.contextPath&#125;/action!findAll.action"&gt;findAll&lt;/a&gt;</span><br><span class="line">&lt;a href="$&#123;pageContext.request.contextPath&#125;/action!save.action"&gt;save&lt;/a&gt;</span><br><span class="line">&lt;a href="$&#123;pageContext.request.contextPath&#125;/action!update.action"&gt;update&lt;/a&gt;</span><br><span class="line">&lt;a href="$&#123;pageContext.request.contextPath&#125;/action!delete.action"&gt;delete&lt;/a&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="8-Struts2的Servlet的API的访问"><a href="#8-Struts2的Servlet的API的访问" class="headerlink" title="8.Struts2的Servlet的API的访问"></a>8.Struts2的Servlet的API的访问</h3><ol>
<li><p>完全解耦合的方式</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/RequsetAction.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">      姓名:&lt;input name=<span class="string">"username"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">      密码:&lt;input name=<span class="string">"password"</span> type=<span class="string">"password"</span>&gt;&lt;br&gt;</span><br><span class="line">      &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"RequsetAction"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.RequestDemo1"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo1</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//接收参数，利用Struts2中的对象ActionContext对象</span></span><br><span class="line">        ActionContext context = ActionContext.getContext();</span><br><span class="line">        <span class="comment">//调用ActionContext中的方法</span></span><br><span class="line">        <span class="comment">//类似于Map&lt;String,String[]&gt; request.getParameterMap();</span></span><br><span class="line">        Map&lt;String, Object&gt; map = context.getParameters();</span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            String[] values = (String[]) map.get(key);</span><br><span class="line">            System.out.println(key+<span class="string">""</span>+ Arrays.toString(values));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//相当于request。setAttribute()</span></span><br><span class="line">        context.put(<span class="string">"reqName"</span>,<span class="string">"revValue"</span>);</span><br><span class="line">        <span class="comment">//相当于session.setAttribute()</span></span><br><span class="line">        context.getSession().put(<span class="string">"sessName"</span>,<span class="string">"sessValues"</span>);</span><br><span class="line">        <span class="comment">//相当于application.setAttribute</span></span><br><span class="line">        context.getApplication().put(<span class="string">"AppName"</span>,<span class="string">"AppValue"</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>==注：这种方式只能获得代表request,session,application的数据的Map集合，不能操作这些对象的本身的方法。==</p>
</li>
</ul>
</li>
<li><p>使用Servlet的API的原生方式</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/RequestApi.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">     姓名:&lt;input name=<span class="string">"username"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">     密码:&lt;input name=<span class="string">"password"</span> type=<span class="string">"password"</span>&gt;&lt;br&gt;</span><br><span class="line">     &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line"> &lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用servlet API的方式--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"RequestApi"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.RequestDemo2"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo2</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//接受数据，直接获得request对象，通过ServletActionContext</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        <span class="comment">//获取参数</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            String[] values = map.get(key);</span><br><span class="line">            System.out.println(key+<span class="string">""</span>+ Arrays.toString(values));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//向域对象中保存数据,向request中保存数据</span></span><br><span class="line">        request.setAttribute(<span class="string">"reqName"</span>,<span class="string">"reqValues"</span>);</span><br><span class="line">        <span class="comment">//向session中保存数据</span></span><br><span class="line">        request.getSession().setAttribute(<span class="string">"sessName"</span>,<span class="string">"sessValue"</span>);</span><br><span class="line">        <span class="comment">//向application中保存数据</span></span><br><span class="line">        ServletActionContext.getServletContext().setAttribute(<span class="string">"appName"</span>,<span class="string">"appValue"</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h6 id="注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。"><a href="#注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。" class="headerlink" title="==注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。=="></a>==注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。==</h6></li>
</ul>
</li>
<li><p>接口注入的方式</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &lt;h3&gt;接口API&lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/interfaceAPI.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    姓名:&lt;input name=<span class="string">"username"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    密码:&lt;input name=<span class="string">"password"</span> type=<span class="string">"password"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用接口 API的方式--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"interfaceAPI"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.RequestDemo3"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo3</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ServletRequestAware</span>,<span class="title">ServletContextAware</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    <span class="keyword">private</span> ServletContext context;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       <span class="comment">//接收参数，通过接口注入的方式获得request对象</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            String[] values = map.get(key);</span><br><span class="line">            System.out.println(key+<span class="string">""</span>+ Arrays.toString(values));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//向域对象中中保存数据，向request域中保存数据</span></span><br><span class="line">        request.setAttribute(<span class="string">"reqName"</span>,<span class="string">"reqValues"</span>);</span><br><span class="line">        <span class="comment">//向session中保存数据</span></span><br><span class="line">        request.getSession().setAttribute(<span class="string">"sessName"</span>,<span class="string">"sessValues"</span>);</span><br><span class="line">        <span class="comment">//向application中保存数据</span></span><br><span class="line">        context.setAttribute(<span class="string">"appName"</span>,<span class="string">"appValues"</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setServletRequest</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.request = request;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setServletContext</span><span class="params">(ServletContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>==注：Servlet是单例的，多个程序访问同一个Servlet只会创建一个Servlet的实例，Action是多例的，一次请求，创建一个Action的实例(不会出现线程安全问题)。==</p>
</li>
</ul>
</li>
</ol>
<h3 id="9-Struts2的结果页面的配置"><a href="#9-Struts2的结果页面的配置" class="headerlink" title="9.Struts2的结果页面的配置"></a>9.Struts2的结果页面的配置</h3><ul>
<li><p>全局结果页面配置</p>
<ul>
<li>指在包中配置一次，其他的在这个包中的所有action只要返回了这个值，都可以跳转到这个页面，针对这个包中的所有的action的配置都有效。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"demo"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--全局结果页面配置--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">global-results</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="10-result标签的配置"><a href="#10-result标签的配置" class="headerlink" title="10.result标签的配置"></a>10.result标签的配置</h3><ul>
<li>result标签用于配置页面的跳转，有两个属性<ul>
<li>name属性：逻辑视图的名称，默认值：success</li>
<li>type属性：页面跳转的类型<ul>
<li>dispatcher:默认值，请求转发(Action转发JSP)</li>
<li>redirect:重定向(Action重定向JSP)</li>
<li>chain:转发(Action转发Action)</li>
<li>redirectAction:重定向(Action重定向Action)</li>
<li>stream:Struts2中提供文件下载的功能</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="11-struts2的数据的封装"><a href="#11-struts2的数据的封装" class="headerlink" title="11.struts2的数据的封装"></a>11.struts2的数据的封装</h3><ol>
<li><p>属性驱动，提供属性的set方法的方式(不常用)</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;属性驱动：提供属性set方法的方式&lt;/h3&gt;</span><br><span class="line"> &lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/userAction1.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">     用户名:&lt;input name=<span class="string">"username"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     密码:&lt;input name=<span class="string">"password"</span> type=<span class="string">"password"</span>&gt;&lt;br/&gt;</span><br><span class="line">     年龄:&lt;input name=<span class="string">"age"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     生日:&lt;input name=<span class="string">"birthday"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     工资:&lt;input name=<span class="string">"salary"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line"> &lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--set属性封装--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"userAction1"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.UserAction"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line">    <span class="comment">//提供对应的属性</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(Double salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//接收数据</span></span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(password);</span><br><span class="line">        System.out.println(age);</span><br><span class="line">        System.out.println(birthday);</span><br><span class="line">        System.out.println(salary);</span><br><span class="line">        <span class="comment">//封装数据</span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(username);</span><br><span class="line">        user.setPassword(password);</span><br><span class="line">        user.setAge(age);</span><br><span class="line">        user.setBirthday(birthday);</span><br><span class="line">        user.setSalary(salary);</span><br><span class="line">        ActionContext context = ActionContext.getContext();</span><br><span class="line"><span class="comment">//        Map&lt;String, Object&gt; map = context.getParameters();</span></span><br><span class="line">       context.put(<span class="string">"user"</span>,user);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>属性驱动，页面中提供表达式方式</p>
<ul>
<li><p>编写jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;属性驱动：在页面中提供表达式方式&lt;/h3&gt;</span><br><span class="line"> &lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/userAction2.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">     用户名:&lt;input name=<span class="string">"user.username"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     密码:&lt;input name=<span class="string">"user.password"</span> type=<span class="string">"password"</span>&gt;&lt;br/&gt;</span><br><span class="line">     年龄:&lt;input name=<span class="string">"user.age"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     生日:&lt;input name=<span class="string">"user.birthday"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     工资:&lt;input name=<span class="string">"user.salary"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line"> &lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在页面中提供表达式的方式--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"userAction2"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.UserAction2"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction2</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    提供User对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     提供set,get方法，一定要提供get方法，</span></span><br><span class="line"><span class="comment">     因为拦截器完成数据封装，需要创建user对象，</span></span><br><span class="line"><span class="comment">     通过get方法可以获得同一个对象，</span></span><br><span class="line"><span class="comment">     将数据封装到同一个对象中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>模型驱动：采用模型驱动的方式(最常用)</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;模型驱动：采用模型驱动的方式&lt;/h3&gt;</span><br><span class="line"> &lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/userAction3.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">     用户名:&lt;input name=<span class="string">"username"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     密码:&lt;input name=<span class="string">"password"</span> type=<span class="string">"password"</span>&gt;&lt;br/&gt;</span><br><span class="line">     年龄:&lt;input name=<span class="string">"age"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     生日:&lt;input name=<span class="string">"birthday"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     工资:&lt;input name=<span class="string">"salary"</span> type=<span class="string">"text"</span>&gt;&lt;br/&gt;</span><br><span class="line">     &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line"> &lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--采用模型驱动的方式--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"userAction3"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.UserAction3"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction3</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span></span>&#123;</span><br><span class="line">    <span class="comment">//模型驱动使用的对象，前提必须手动提供对象的实例</span></span><br><span class="line">    <span class="keyword">private</span> User user = <span class="keyword">new</span> User();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//模型驱动需要使用的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Struts2复杂数据类型的封装</p>
<ul>
<li><p>封装数据到List集合中</p>
<ul>
<li><p>编写jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;封装到List集合中，批量插入商品&lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/productAction1.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    商品名称：&lt;input name=<span class="string">"products[0].name"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品价格：&lt;input name=<span class="string">"products[0].price"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品名称：&lt;input name=<span class="string">"products[1].name"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品价格：&lt;input name=<span class="string">"products[1].price"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品名称：&lt;input name=<span class="string">"products[2].name"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品价格：&lt;input name=<span class="string">"products[2].price"</span> type=<span class="string">"text"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写struts.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"productAction1"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day02.ProductAction1"</span> <span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Action</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductAction1</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Products&gt; products;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Products&gt; <span class="title">getProducts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> products;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProducts</span><span class="params">(List&lt;Products&gt; products)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.products = products;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Products product : products) &#123;</span><br><span class="line">            System.out.println(product);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        ActionContext context = ActionContext.getContext();</span></span><br><span class="line"><span class="comment">//        context.put("p",products);</span></span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="12-OGNL"><a href="#12-OGNL" class="headerlink" title="12.OGNL"></a>12.OGNL</h3><p><code>OGNL是Object-Graph Navigation 
Language的缩写，它是一种功能强大的表达式语言，通过它简单一致的表达式语法，可以存取对象的任意属性，调用对象的方法，遍历整个对象的结构图，实现字段类型转化等功能。它使用相同的表达式去存取对象的属性。这样可以更好的取得数据。</code></p>
<ul>
<li><p>Struts2使用OGNL的优势</p>
<ul>
<li>支持对象方法调用。如ObjName.methodName()</li>
<li>支持类静态方法调用和值访问，表达式的格式为@[全类名(包括包路径)]@[方法名 | 值名]。如@java.lang.String@format(‘foo %s’,’bar’)。</li>
<li>支持赋值操作和表达式串联。</li>
<li>访问OGNL上下文(OGNL context) 和ActionContext。</li>
<li>操作集合对象。</li>
</ul>
</li>
<li><p>OGNL三要素</p>
<ul>
<li>表达式<ul>
<li>OGNL的核心，OGNL会根据表达式去对象中取值，所有的OGNL操作都是针对表达式解析后进行的，表明了此次OGNL操作要“做什么”。表达式就是一个带有语法含义的字符串，这个字符串规定了操作的类型和操作的内容。OGNL支持大量的表达式语法，不仅支持这种“链式”对象访问路径，还支持在表达式中进行简单的计算。</li>
</ul>
</li>
<li>根对象<ul>
<li>Root对象可以理解为OGNL的操作语言，表达式规定了“做什么”，而Root对象则规定了“对谁操作”。OGNL称为对象图导航语言，所谓对象图，即以任意对象为根，通过OGNL可以访问与这个对象关联的其他对象。</li>
</ul>
</li>
<li>Context对象<ul>
<li>实际上OGNL的取值还需要一个上下文环境，设置了Root环境，OGNL可以对Root对象进行取值或写值等操作，Root对象所在环境就是OGNL的上下文环境(Context)。上下文环境规定了OGNL的操作“在哪里进行”。上下文环境Context是一个Map类型的对象，在表达式中访问Context中的对象，需要使用“#”号加上对象名称，即“#对象名称”的形式。</li>
</ul>
</li>
</ul>
</li>
<li><p>OGNL简单演示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">       demo demo = <span class="keyword">new</span> demo();</span><br><span class="line"><span class="comment">//       demo.demo1();</span></span><br><span class="line"><span class="comment">//       demo.demo2();</span></span><br><span class="line">       demo.demo3();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo1</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//OGNL调用对象的方法</span></span><br><span class="line">        OgnlContext context = <span class="keyword">new</span> OgnlContext();</span><br><span class="line">        Object obj = Ognl.getValue(<span class="string">"'HelloWorld'.length()"</span>, context, context.getRoot());</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo2</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * OGNL调用对象静态的方法</span></span><br><span class="line"><span class="comment">         * 格式：</span></span><br><span class="line"><span class="comment">         *      @类的全路径名@方法名(参数列表)</span></span><br><span class="line"><span class="comment">         *      @类的全路径名@属性名称</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        OgnlContext context = <span class="keyword">new</span> OgnlContext();</span><br><span class="line">        Object obj = Ognl.getValue(<span class="string">"@java.lang.Math@random()"</span>, context, context.getRoot());</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo3</span><span class="params">()</span> <span class="keyword">throws</span> OgnlException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * OGNL获取数据</span></span><br><span class="line"><span class="comment">         * 获取root中的数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        OgnlContext context = <span class="keyword">new</span> OgnlContext();</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">//        user.setUsername("张三");</span></span><br><span class="line">        context.setRoot(<span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="string">"11111111"</span>,<span class="number">12</span>,<span class="keyword">new</span> Date(),<span class="number">12.3</span>));</span><br><span class="line">        Object username =  Ognl.getValue(<span class="string">"username"</span>, context,context.getRoot());</span><br><span class="line">        Object password =  Ognl.getValue(<span class="string">"password"</span>, context,context.getRoot());</span><br><span class="line">        Object age =  Ognl.getValue(<span class="string">"age"</span>, context,context.getRoot());</span><br><span class="line">        Object birthday =  Ognl.getValue(<span class="string">"birthday"</span>, context,context.getRoot());</span><br><span class="line">        Object salary =  Ognl.getValue(<span class="string">"salary"</span>, context,context.getRoot());</span><br><span class="line">        System.out.println(username+<span class="string">""</span>+password+<span class="string">""</span>+age+<span class="string">""</span>+birthday+<span class="string">""</span>+salary);</span><br><span class="line"><span class="comment">//        System.out.println(password);</span></span><br><span class="line"><span class="comment">//        System.out.println(age);</span></span><br><span class="line"><span class="comment">//        System.out.println(birthday);</span></span><br><span class="line"><span class="comment">//        System.out.println(salary);</span></span><br><span class="line"><span class="comment">//        System.out.println(username);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>struts2使用OGNL</p>
<ul>
<li><p>创建demo1ognl.jsp页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%--引入struts2标签--%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"/struts-tags"</span> prefix=<span class="string">"s"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ognl&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;OGNL在struts2环境中的入门&lt;/h1&gt;</span><br><span class="line">&lt;h3&gt;调用对象的方法&lt;/h3&gt;</span><br><span class="line">&lt;%--使用OGNL的标签--%&gt;</span><br><span class="line">&lt;h3&gt;调用对象的方法&lt;/h3&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"'struts2'.length()"</span>/&gt;</span><br><span class="line">&lt;h3&gt;调用对象的静态方法&lt;/h3&gt;</span><br><span class="line">&lt;%--静态方法在struts中默认是关闭的需要在struts.xml中开启--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"@java.lang.Math@random()"</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在struts.xml中关闭struts对静态资源的过滤</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启struts静态资源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.ognl.allowStaticMethodAccess"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>访问成功</p>
<p><img src="/2019/07/09/struts/1558409702790.png" alt="1558409702790"></p>
</li>
</ul>
</li>
</ul>
<h3 id="13-值栈"><a href="#13-值栈" class="headerlink" title="13.值栈"></a>13.值栈</h3><ul>
<li><p>什么是值栈</p>
<ul>
<li>ValueStack是Struts的一个接口，字面意义为值栈，OgnlValueStack是ValueStack的实现类，客户端发起一个请求，Struts2架构会创建一个action实例同时创建一个OgnlValueStack值栈实例，OgnlValueStack贯穿整个Action的生命周期，struts2中使用OGNL将请求Action的参数封装为对象存储到值栈中，并通过OGNL表达式读取值栈中的对象属性值。</li>
<li>valueStack类似于一个数据中转站(Struts2的框架当中的数据就都保存到了ValueStack中)<ul>
<li>ValueStack接口：实现类ognlValueStack对象。</li>
<li>ValueStack贯穿整个Action的生命周期。（Action一旦创建了，框架就会创建一个ValueStack对象）</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>值栈的内部结构</p>
<ul>
<li><p>在OgnlValueStack中包括两部分，值栈和map(即ognl上下文)</p>
<p><img src="/2019/07/09/struts/1558423520232.png" alt="1558423520232"></p>
</li>
</ul>
<ul>
<li><p>Context:即OgnlContext上下文，它是一个map结构，上下文中存储了一些引用，parameters，request，session，application等，上下文的Root为CompoundRoot。</p>
</li>
<li><p>OgnlContext中的一些引用</p>
<ul>
<li>parameters：该Map中包含当前请求的请求参数。</li>
<li>request：该Map中包含当前request对象中的所有属性。</li>
<li>session：该Map中包含当前session对象中的所有属性。</li>
<li>application：该Map中包含当前application对象中的所有属性</li>
<li>attr：该Map按如下顺序来检索某个属性：request,session,application</li>
</ul>
</li>
<li><p>CompoundRoot:存储了action实例，它作为OgnlContext的Root对象。</p>
<ul>
<li>CompoundRoot继承了ArrayList实现压栈和出栈功能，拥有栈的特点，先进先出，后进后出，最后压进栈的数据在栈顶，称之为对象栈。</li>
</ul>
</li>
<li><p>Struts2对原OGNL作出的改变就是Root使用CompoundRoot(自定义帐)，使用OgnlValueStack的findValue方法可以在CompoundRoot中从栈顶向栈底查找对象的属性值。</p>
</li>
<li><p>CompoundRoot作为OgnlContext的Root对象，并且在CompoundRoot中action实例位于栈顶，当读取action的属性值时会先从栈对象中找对应的属性，如果找不到则继续找栈中的其他对象，如果找到则停止查找。</p>
</li>
</ul>
</li>
<li><p>值栈与ActionContext的关系</p>
<ul>
<li>ActionContext：Action的上下文，通过看源码发现，当请求过来的时候，执行过滤器中的diFilter方法，在这个方法中创建ActionContext，在创建ActionContext过程中，创建ValueStack对象，将ValueStack对象传递给ActionContext对象，所以可以通过ActionContext获取值栈对象。</li>
<li>ActionContext对象之所以能够访问Servlet的API（访问的是域对象的数据）。因为在其内部有值栈的引用。</li>
</ul>
</li>
<li><p>获得值栈</p>
<ul>
<li>通过ActionContext对象获取值栈。</li>
<li>在struts2的内部，将值栈存入request中一份。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueStackdemo1</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//通过ActionContext对象获取值栈</span></span><br><span class="line">        ValueStack valueStack = ActionContext.getContext().getValueStack();</span><br><span class="line">        <span class="comment">//通过request域获取值栈</span></span><br><span class="line">         ValueStack attribute = (ValueStack) ServletActionContext.getRequest().getAttribute(ServletActionContext.STRUTS_VALUESTACK_KEY);</span><br><span class="line">        <span class="comment">//true一个Action实例，只会创建一个ValueStack实例</span></span><br><span class="line">        System.out.println(valueStack == attribute);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>操作值栈-向值栈中存入数据</p>
<ol>
<li><p>在Action中提供属性的get方法的方式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueStackdemo2</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        user = <span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="string">"11111111"</span>,<span class="number">20</span>,<span class="keyword">new</span>  Date(),<span class="number">12.1</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用ValueStack中本身的方法的方式(常用）。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueStackdemo3</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//向值栈中保存数据，获得值栈对象</span></span><br><span class="line">        ValueStack valueStack = ActionContext.getContext().getValueStack();</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="string">"11111111"</span>,<span class="number">20</span>,<span class="keyword">new</span>  Date(),<span class="number">12.1</span>);</span><br><span class="line">        <span class="comment">//向值栈中放入对象</span></span><br><span class="line">        valueStack.push(user);</span><br><span class="line">        <span class="comment">//调用父类的方法默认返回success.jsp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>success.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"com.ym.struts2.domain.User"</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Mr Yan</span><br><span class="line">  Date: <span class="number">2019</span>/<span class="number">5</span>/<span class="number">18</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">30</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"/struts-tags"</span> prefix=<span class="string">"s"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;s:debug&gt;&lt;/s:debug&gt;</span><br><span class="line">       &lt;%--使用ValueStack本身的方法--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"username"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"password"</span>/&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取值栈数据</p>
<ul>
<li><p>获取值栈中的数据就是在页面中使用OGNL表达式    </p>
<ul>
<li>获取root的数据</li>
<li>获取context的数据(需要使用#)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueStackdemo4</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//向值栈中保存一个对象</span></span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"李四"</span>,<span class="string">"11111111"</span>,<span class="number">12</span>,<span class="keyword">new</span> Date(),<span class="number">12.3</span>);</span><br><span class="line">        ActionContext.getContext().getValueStack().push(user);</span><br><span class="line">        <span class="comment">//向值栈中保存一个集合</span></span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="string">"11111111"</span>,<span class="number">13</span>,<span class="keyword">new</span> Date(),<span class="number">100.0</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> User(<span class="string">"王五"</span>,<span class="string">"11111111"</span>,<span class="number">13</span>,<span class="keyword">new</span> Date(),<span class="number">100.0</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> User(<span class="string">"赵六"</span>,<span class="string">"11111111"</span>,<span class="number">13</span>,<span class="keyword">new</span> Date(),<span class="number">100.0</span>));</span><br><span class="line">        ActionContext.getContext().getValueStack().set(<span class="string">"list"</span>,list);</span><br><span class="line">        <span class="comment">//向context中存入数据</span></span><br><span class="line">        <span class="comment">//request</span></span><br><span class="line">        ServletActionContext.getRequest().setAttribute(<span class="string">"周七"</span>,<span class="string">"22222222"</span>);</span><br><span class="line">        <span class="comment">//session</span></span><br><span class="line">        ServletActionContext.getRequest().getSession().setAttribute(<span class="string">"name"</span>,<span class="string">"哈哈"</span>);</span><br><span class="line">        <span class="comment">//application</span></span><br><span class="line">        ServletActionContext.getServletContext().setAttribute(<span class="string">"name"</span>,<span class="string">"yyy"</span>);</span><br><span class="line">        <span class="comment">//调用父类的方法默认返回success.jsp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>success.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"com.ym.struts2.domain.User"</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Mr Yan</span><br><span class="line">  Date: <span class="number">2019</span>/<span class="number">5</span>/<span class="number">18</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">30</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"/struts-tags"</span> prefix=<span class="string">"s"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;s:debug&gt;&lt;/s:debug&gt;</span><br><span class="line">  &lt;%--使用ValueStack本身的方法--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"username"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"password"</span>/&gt;</span><br><span class="line">  &lt;%--从值栈中获取集合--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[0].username"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[0].password"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[1].username"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[1].password"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[2].username"</span>/&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"list[2].password"</span>/&gt;</span><br><span class="line">  &lt;%--获取context中的数据格式为</span><br><span class="line">    #request.username</span><br><span class="line">    #request.password</span><br><span class="line">  --%&gt;</span><br><span class="line">  &lt;%--获取request中的数据--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"#request.周七"</span>/&gt;</span><br><span class="line">  &lt;%--获取session中的数据--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"#session.name"</span>/&gt;</span><br><span class="line">  &lt;%--获取application中的数据--%&gt;</span><br><span class="line">  &lt;s:property value=<span class="string">"#application.name"</span>/&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="14-OGNL中特殊字符"><a href="#14-OGNL中特殊字符" class="headerlink" title="14.OGNL中特殊字符"></a>14.OGNL中特殊字符</h3><ul>
<li><p>#号</p>
<ul>
<li>获取context中的数据</li>
<li>使用#构建map集合</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"/struts-tags"</span> prefix=<span class="string">"s"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;构建map集合&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;s:iterator <span class="keyword">var</span>=<span class="string">"i"</span> value=<span class="string">"&#123;'aa','bb','ccc'&#125;"</span>&gt;</span><br><span class="line">        &lt;s:property value=<span class="string">"i"</span>/&gt; -- &lt;s:property value=<span class="string">"#i"</span>/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br><span class="line">&lt;s:iterator value=<span class="string">"#&#123;'aaa':'11','bb':'22','cc':33&#125;"</span>&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">"key"</span>/&gt;--&lt;s:property value=<span class="string">"value"</span>/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br><span class="line">&lt;%--单选--%&gt;</span><br><span class="line">&lt;s:radio list=<span class="string">"#&#123;'1':'男','2':'女'&#125;"</span> name=<span class="string">"sex"</span> label=<span class="string">"性别"</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>%号</p>
<ul>
<li><p>强制解析OGNL表达式</p>
</li>
<li><p>强制不解析OGNL表达式</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;%号的用法&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">request.setAttribute(<span class="string">"name"</span>,<span class="string">"ym"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--强制解析--%&gt;</span><br><span class="line">姓名&lt;s:textfield name=<span class="string">"name"</span> value=<span class="string">"%&#123;#request.name&#125;"</span>/&gt;</span><br><span class="line">&lt;%--强制不解析--%&gt;</span><br><span class="line">姓名&lt;s:textfield name=<span class="string">"name"</span> value=<span class="string">"%&#123;'#request.name'&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/09/struts/1558451680695.png" alt="1558451680695"></p>
</li>
</ul>
</li>
<li><p>$号</p>
<ul>
<li>主要用于在配置文件中使用OGNL表达式</li>
</ul>
</li>
</ul>
<h3 id="15-Struts2拦截器"><a href="#15-Struts2拦截器" class="headerlink" title="15.Struts2拦截器"></a>15.Struts2拦截器</h3><ul>
<li>作用：起到拦截Action的作用。</li>
<li>Interceptor：拦截器，拦截是客户端对Action的访问，更细粒度化的拦截（拦截Action中的具体方法）</li>
<li>Struts2框架核心的功能都是以来与拦截器实现的。</li>
</ul>
<h3 id="16-拦截器demo"><a href="#16-拦截器demo" class="headerlink" title="16.拦截器demo"></a>16.拦截器demo</h3><ul>
<li><p>创建一个类实现Interceptor接口或继承AbstractInterceptor类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrutsInterceptor</span> <span class="keyword">extends</span> <span class="title">AbstractInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">intercept</span><span class="params">(ActionInvocation actionInvocation)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"拦截方法执行了"</span>);</span><br><span class="line">        String invoke = actionInvocation.invoke();</span><br><span class="line">        System.out.println(<span class="string">"拦截器执行完毕"</span>);</span><br><span class="line">        <span class="keyword">return</span> invoke;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置struts.xml</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器进行拦截--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptor"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.day04.StrutsInterceptor"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"valueStartdemo4"</span> <span class="attr">class</span>=<span class="string">"com.ym.struts2.ognl.ValueStackdemo4"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/page/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--在此方法上引入拦截器(一旦引入拦截器，默认的拦截器就不执行了，需要手动的引入)--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptor"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>执行完毕</li>
</ul>
<p><img src="/2019/07/09/struts/1558496234242.png" alt="1558496234242"></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
            <a href="/tags/MVC/" rel="tag"># MVC</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/22/多线程3线程池/" rel="next" title="多线程3线程池">
                <i class="fa fa-chevron-left"></i> 多线程3线程池
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/10/Hibernate总结/" rel="prev" title="Hibernate总结">
                Hibernate总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Yan Mao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Struts"><span class="nav-number">1.</span> <span class="nav-text">Struts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Struts2框架概述"><span class="nav-number">1.1.</span> <span class="nav-text">1. Struts2框架概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Struts2入门"><span class="nav-number">1.2.</span> <span class="nav-text">2. Struts2入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Struts2工作流程"><span class="nav-number">1.3.</span> <span class="nav-text">3. Struts2工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Struts-xml相关配置讲解"><span class="nav-number">1.4.</span> <span class="nav-text">4.Struts.xml相关配置讲解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Struts2常量配置"><span class="nav-number">1.5.</span> <span class="nav-text">5.Struts2常量配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-struts分模块开发配置"><span class="nav-number">1.6.</span> <span class="nav-text">6.struts分模块开发配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Action的访问"><span class="nav-number">1.7.</span> <span class="nav-text">7.Action的访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Struts2的Servlet的API的访问"><span class="nav-number">1.8.</span> <span class="nav-text">8.Struts2的Servlet的API的访问</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。"><span class="nav-number">1.8.0.0.1.</span> <span class="nav-text">==注：使用此方式可以操作域对象的数据，同时也可以获得对象的方法。==</span></a></li></ol></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Struts2的结果页面的配置"><span class="nav-number">1.9.</span> <span class="nav-text">9.Struts2的结果页面的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-result标签的配置"><span class="nav-number">1.10.</span> <span class="nav-text">10.result标签的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-struts2的数据的封装"><span class="nav-number">1.11.</span> <span class="nav-text">11.struts2的数据的封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-OGNL"><span class="nav-number">1.12.</span> <span class="nav-text">12.OGNL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-值栈"><span class="nav-number">1.13.</span> <span class="nav-text">13.值栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-OGNL中特殊字符"><span class="nav-number">1.14.</span> <span class="nav-text">14.OGNL中特殊字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-Struts2拦截器"><span class="nav-number">1.15.</span> <span class="nav-text">15.Struts2拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-拦截器demo"><span class="nav-number">1.16.</span> <span class="nav-text">16.拦截器demo</span></a></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yan Mao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
